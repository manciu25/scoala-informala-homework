package com.servlet;

import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
import java.time.LocalDate;
import java.time.temporal.ChronoUnit;

@WebServlet("/myAge")
public class AgeServlet extends HttpServlet {

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<h3>Your age in days is:</h3>");

        String date = "date";
        String paramValue = request.getParameter(date);

        LocalDate w = LocalDate.parse(paramValue);
        LocalDate today = LocalDate.now();
        LocalDate birthday = LocalDate.of(w.getYear(), w.getMonth(), w.getDayOfMonth());
        long days = ChronoUnit.DAYS.between(birthday, today);
        String d = String.valueOf(days);

        out.println(d);

        out.close();


    }
}